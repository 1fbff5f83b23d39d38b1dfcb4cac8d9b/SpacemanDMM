{% macro teaser(block, prefix="") -%}
    {%- if block -%}
        {%- set teaser = block.html | safe | substring(start=block.teaser.start, end=block.teaser.end) -%}
        {%- if teaser %}{{ prefix }}{{ teaser | safe }}{% endif -%}
    {%- endif -%}
{%- endmacro teaser %}

{% macro git_link(env, item=false, file=false) -%}
    {% if item and item.file %}
        {% set file = item.file %}
    {% endif %}
    {%- if file -%}
        {%- if env.git.web_url and env.git.revision %}
            <a href="{{ env.git.web_url | safe }}/blob/{{ env.git.revision }}/{{ file | safe }}
            {%- if item.line %}#L{{ item.line }}{% endif %}">
        {%- endif %}
        <img src="git.png" width="16" height="16" title="{{ file }}{% if item.line %} {{ item.line }}{% endif %}"/>
        {%- if env.git.web_url and env.git.revision %}</a>{% endif %}
    {%- endif -%}
{%- endmacro git_link %}
